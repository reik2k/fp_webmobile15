var IRH_Utils={Cites:null,Selector:"li.g div.rc cite",irh_log:function(value){try{}
catch(e){}},parseQueryString:function(regStr){IROBW.LOG("parseQueryString()");function parseQuery(query){var Params=new Object();if(!query)
return Params;var Pairs=query.split(/[;&]/);for(var i=0;i<Pairs.length;i++){var KeyVal=Pairs[i].split('=');if(!KeyVal||KeyVal.length!=2)
continue;var key=unescape(KeyVal[0]);var val=unescape(KeyVal[1]);val=val.replace(/\+/g,' ');Params[key]=val;}
return Params;}
var p1;var temp_pQueryString={};var scripts=document.getElementsByTagName('script');for(var s,i=scripts.length;i&&(s=scripts[--i]);){try{if((s=s.getAttribute('src'))&&(s=s.toLowerCase().match(regStr))){s[2]=s[2].slice(1);temp_pQueryString=parseQuery(s[2]);}}catch(e){}}
return temp_pQueryString;},overrideBaseFunction:function(){for(var key in IROBWB){IROBW[key]=IROBWB[key];}},getWeekQuery:function(){d=new Date();d.setHours(0,0,0);d.setDate(d.getDate()+4-(d.getDay()||7));var yearStart=new Date(d.getFullYear(),0,1);var weekNo=Math.ceil((((d-yearStart)/86400000)+1)/7);return d.getFullYear().toString()+weekNo.toString();},CheckStringDefined:function(str){try{if(str){return true;}
return false;}catch(e){return false;}},AttachAffiliateID:function(url,ap,pkgId){if(url.indexOf("http://")==-1)
url="//"+url;try{if(ap.length>0){if(url.indexOf("?")==-1){url+="?"+ap+"="+pkgId;}else{url+="&"+ap+"="+pkgId;}}}catch(e){}
return url;},createToolTip:function(dsJson,index,sID){var TooltipContainer=IRH_Utils.CreateTltpContainer();var TooltipPopup=IRH_Utils.CreateTltpPopup();var TooltipBubble=IRH_Utils.CreateTltpBubble();var rtnType="";var afflink="";var serp_id,action_id,coupon_id,coupon_type;try{dsJson=dsJson[0];coupon_id=dsJson.coupon_id||-1;if(coupon_id==-1)
coupon_type=3;afflink=IRH_Utils.AttachAffiliateID(dsJson.Chosen_link,dsJson.AP,Credentials.raw_pkgid);rtnType=dsJson[0].Type.toString().toLowerCase();}catch(e){}
if(afflink.length>0)
TooltipPopup.className+=" coupon";try{var randNum=parseInt(Math.random()*10000000000);if(typeof dsJson.coupon_id!=="undefined"){if(dsJson.Type=="text"){coupon_type=2;TooltipPopup.innerHTML='<iframe id="irhui-'+randNum+'" onload="IRH_Utils.AdjustHeight(this);" width="400px" height="200px" frameborder="0" src="https://www.donation-tools.org/widgets/js/Strip.html?pkgId='+IROBW.Credentials.raw_pkgid+'&type='+coupon_type+'&cpnId='+coupon_id+'&message='+encodeURIComponent(dsJson.Coupon_desc)+'&U='+encodeURIComponent(afflink)+'&frameId=irhui-'+randNum+'" style="overflow: hidden; z-index: 99999999;"></iframe>';}else if(dsJson.Type=="banner"){coupon_type=1;TooltipPopup.innerHTML='<a href="'+afflink+'"><img src="'+dsJson.Coupon_image+'" height="'+dsJson.Coupon_height+'" width="'+dsJson.Coupon_width+'" /></a>';}}else if(typeof dsJson.SType!=="undefined"){coupon_type=3;var messageText;var redirectUrl=decodeURIComponent(dsJson.U);redirectUrl=(redirectUrl.indexOf("http:")==-1&&redirectUrl.indexOf("https:")==-1)?"http://"+redirectUrl:redirectUrl;redirectUrl=AttachAffiliateID(redirectUrl,dsJson.AP,Credentials.raw_pkgid);var cmsn=GetCommission(dsJson.CMIN,dsJson.CMAX,dsJson.CText);if(cmsn.length==0){messageText="Every purchase at "+dsJson.A+" generates a donation at <b>no cost</b> to you.";}else{if(cmsn.indexOf("-")==-1)
cmsn="Up to "+cmsn;messageText=cmsn+" of your purchase will be donated at <b>no cost</b> to you.";}
TooltipPopup.innerHTML='<iframe id="irhui-'+randNum+'" width="400px" height="200px" frameborder="0" src="https://donation-tools.org/widgets/js/Strip.html?pkgId='+IROBW.Credentials.raw_pkgid+'&type='+coupon_type+'&cpnId='+coupon_id+'&message='+encodeURIComponent(messageText)+'&U='+encodeURIComponent(redirectUrl)+'&frameId=irhui-'+randNum+'" style="overflow: hidden; z-index: 99999999;"></iframe>';}}catch(e){}
IROBW.AddScript('//system.donation-tools.org/logs/coupon_log.aspx?pkgId='+IROBW.Credentials.raw_pkgid+'&serpId=4&action=1&cpnId='+coupon_id+'&cpnType='+coupon_type);TooltipBubble.appendChild(TooltipPopup);TooltipContainer.appendChild(TooltipBubble);IRH_Utils.Cites[index].parentNode.appendChild(TooltipContainer);var distance=10;var time=250;var hideDelay=500;var showDelay=500;var showDelayTimer=null;var hideDelayTimer=null;var beingShown=false;var shown=false;var flag=false;var Elem=jQuery(IRH_Utils.Selector).get(index);var ElemParent=jQuery(Elem).parents('div.s').get(0);var serpResultH3=jQuery(ElemParent).siblings('h3.r').get(0);var trigger=jQuery(ElemParent).find('.irhTrigger').get(0);var info=jQuery('.popup',ElemParent).get(0);var firstTime=false;coupon_id=dsJson.coupon_id;jQuery(info).css('opacity',0).css('height','150px');jQuery([trigger,info]).mouseenter(function(){if(hideDelayTimer)
clearTimeout(hideDelayTimer);jQuery(this).attr('src','http://www.donation-tools.org/widgets/img/heart_03_glow.png');jQuery(this).parent().css('z-index','10000000000000000');var triggerElem=jQuery(this);var clsName=jQuery(triggerElem).attr('class');showDelayTimer=setTimeout(function(){if(!firstTime){firstTime=true;if(!coupon_id)
coupon_id=-1;IROBW.AddScript('//system.donation-tools.org/logs/coupon_log.aspx?pkgId='+IROBW.Credentials.raw_pkgid+'&serpId=4&action=2&cpnId='+coupon_id+'&cpnType='+coupon_type);}
if(beingShown||shown){return;}else{beingShown=true;jQuery(info).css({top:-15,right:-30,display:'block'}).animate({opacity:1},time,'swing',function(){beingShown=false;shown=true;});}},showDelay);return false;}).mouseleave(function(){jQuery(this).attr('src','http://www.donation-tools.org/widgets/img/SerpHeart.png');shown=false;clearTimeout(showDelayTimer)
if(hideDelayTimer){jQuery('.irhTrigger').each(function(elem){jQuery(this).parent().css('z-index','initial');});clearTimeout(hideDelayTimer);}
hideDelayTimer=setTimeout(function(){hideDelayTimer=null;jQuery(info).animate({opacity:0},time,'swing',function(){shown=false;jQuery('.irhTrigger').each(function(elem){jQuery(this).parent().css('z-index','initial');});beingShown=false;jQuery(info).css('display','none');});},hideDelay);return false;});},CreateTltpContainer:function(){var p=document.createElement("img");p.src="http://cdn.donation-tools.org/widgets/img/SerpHeart.png";p.id="irobHeart";p.className='irhTrigger';p.height='23';p.width='23';var divWrapperP=document.createElement("div");divWrapperP.style["display"]="inline";divWrapperP.style["position"]="absolute";divWrapperP.style["marginLeft"]="2px";divWrapperP.appendChild(p);return divWrapperP;},CreateTltpBubble:function(){var bubbleInfo=document.createElement("div");bubbleInfo.className="bubbleInfo";bubbleInfo.style['position']='relative';bubbleInfo.style['bottom']='90px';return bubbleInfo;},CreateTltpPopup:function(){var popup=document.createElement("div");popup.className='popup';popup.id='popup';popup.style['position']='relative';popup.style['display']='none';return popup;},AdjustHeight:function(iframeElem){iframeElem.contentWindow.postMessage(JSON.stringify({msgType:"getHeight"}),"*");},SITE_DATA:function(Address,redirect,commission,network,ap,type,id,pn,sNType){this.sAddress=Address;this.sRedirectUrl=redirect;this.sCommission=commission;this.sNetwork=network;this.sAffiliateParam=ap;this.sType=type;this.sID=id;this.PN=pn;this.sNType=sNType||null;},SIMILAR_SITE_DATA:function(Address,type){this.sAddress=Address;this.sType=type;},IROB_CRED:function(pkgid,raw_pkgid,newSession){IRH_Utils.irh_log("IROB_CRED: "+pkgid);IRH_Utils.irh_log("IROB_CRED: "+raw_pkgid);this.pkgid=pkgid;this.raw_pkgid=raw_pkgid;this.newSession=newSession||0;},IROB_SETTINGS:function(TM,HU,CC,CI,AU,CF,IA){this.TM=TM;this.HU=HU;this.CC=CC;this.CI=CI;this.AU=AU;this.CF=CF;this.IA=IA;},IROB_USER_SETTINGS:function(RP,LN,SHOWUI,CI,CN,IA,REVID){this.RP=RP;this.LN=LN;this.SHOWUI=SHOWUI;this.CI=CI;this.CN=CN;this.IA=IA;this.REVID=REVID;},onDocumentComplete:function(){try{if(parseInt(IROBW.isActive())==0){return;}}catch(e){}
var isAff=IROBW.IsAffiliateRedirectPage(document.location.toString());if(!isAff){isAff=IROBW.IsAffiliateRedirectPage(document.referrer.toString());}
if(IROBW.IsFbdnMerchant(document.location.toString()))
return;var url=document.location.href.toString();var referrer=document.referrer.toString();var fbdnStr=["aclk?","afsrc=1"];for(i in fbdnStr){if(url.indexOf(fbdnStr[i])>-1||referrer.indexOf(fbdnStr[i])>-1){IROBW.AddToVisited();return;}}
var fbdnIds=IROBW.IsAffiliatePage2(url,referrer);IROBW.CheckSite2("IROBW.Redirect",fbdnIds);if(IROBW.Serp==true)
IROBW.CheckSerp();},Message:function(e,t,n,r){this.key=e;this.value=t;this.msgType=n;this.callback=r}};var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"unknown"},searchString:function(e){for(var t=0;t<e.length;t++){var n=e[t].string;var r=e[t].prop;if(n){if(n.indexOf(e[t].subString)!=-1)
return e[t].identity}else if(r)
return e[t].identity}},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer"}]};if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}
if(typeof String.prototype.endsWith!=="function"){String.prototype.endsWith=function(e){return this.indexOf(e,this.length-e.length)!==-1}}
var IROBW=function(e,t,n,r,i,s){this.PROG_ID=e;this.DOT_ID=t;this.EXT_ID=n;this.IROB_SERVER=r||"system";this.clbkDoc=i||function(){};this.IRHuserAgent=s;this.Credentials;this.irobSettings;this.irobUserSettings};IROBW={iframe:null,disValues:["aclk?","afsrc=","click.linksynergy.com",".anrdoezrs.net",".dpbolvw.net",".jdoqocy.com",".kqzyfj.com",".qksrv.net",".tkqlhce.com","utm_campaign=lomadee","utm_medium=lomadee","utm_source=Lomadee","tracker.lomadee.com","source=webgains"],STRIP_TYPE:{CPN:4,GREEN:3,YELLOW:1,RED:2},StripSitesReferrer:["donation-tools.org/redirectAmazon.htm"],PROG_ID:null,DOT_ID:null,EXT_ID:null,SUB_ID:null,IRHuserAgent:null,Credentials:null,irobSettings:null,irobUserSettings:null,pQueryString:null,HOUR_MS:36e5,DAY_MS:864e5,headID:document.getElementsByTagName("head")[0],clbkDoc:function(){},isActive:function(){return IROBW.irobUserSettings.IsActive},Settings:{},aclkref:false,IROB_SERVER:"system",NameSpace:"",MainGA:"",RedirectGA:"",InitVars:function(Settings){IROBW.PROG_ID=Settings.PROG_ID;IROBW.DOT_ID=Settings.DOT_ID;IROBW.EXT_ID=Settings.EXT_ID;IROBW.ProdName=Settings.ProdName;IROBW.ptFrame=Settings.ptFrame;IROBW.StripUrl=Settings.StripUrl;IROBW.MainGA=Settings.MainGA;IROBW.RedirectGA=Settings.RedirectGA;IROBW.NameSpace=Settings.NameSpace;IROBW.Tooltip=Settings.Tooltip;IROBW.Serp=Settings.Serp;IROBW.SUB_ID=Settings.SUB_ID;IROBW.pQueryString=IRH_Utils.parseQueryString(Settings.regStr);try{BrowserDetect.init();IROBW.IRHuserAgent=BrowserDetect.browser||"unknown"}catch(e){IROBW.IRHuserAgent="unknown"}},SendMessage:function(e){IROBW.LOG("Sending: "+JSON.stringify(e));IROBW.iframe.contentWindow.postMessage(JSON.stringify(e),"*")},CheckSite:function(e){IROBW.LOG("CheckSite()");if(document.referrer.indexOf(IROBW.StripSitesReferrer)>-1){IROBW.LOG("Strip site found");var n=new IRH_Utils.SITE_DATA("","","","","","","","",3);IROBW.fireStrip(n);return}
var r=document.createElement("SCRIPT");r.src="//system.donation-tools.org/packages/pkgGetRedirectInformation.aspx?subby=4&domain="+fnGetDomain(window.top.location.href.toString())+"&progId="+IROBW.PROG_ID+"&clbkFunc="+e+"&tq="+IRH_Utils.getWeekQuery();headID.appendChild(r)},Init:function(){IROBW.LOG("Init()");IROBW.InitFrame(function(){IROBW.GetCredentials()},IROBW.clbkDoc)},LOG:function(e){try{IRH_Utils.irh_log("-----"+e+"-----")}catch(t){}},CheckFBDN:function(e){try{var t=e.split(";;;");var n=document.createElement("div");for(i in t){try{t[i]=t[i].toString().toLowerCase().trim();n.innerHTML=t[i];t[i]=n.firstChild.nodeValue;if(t[i].endsWith("*")==true){t[i]=t[i].substring(0,t[i].length-1);if(document.location.href.toString().toLowerCase().trim().indexOf(t[i])>-1){return true}}else if(document.location.href.toString().toLowerCase().trim()==t[i]){return true}}catch(r){}}}catch(r){}
return false},Redirect:function(e){IROBW.LOG("Redirect()");var n=e[0];var r="";try{r=n["N"].toString().toLowerCase().trim()}catch(i){}
if(r=="cj"||r=="ls"||r=="zanox"){if(IROBW.checkIfAd()){IRH_Utils.irh_log("Ad!");IROBW.AddToVisited();return}}
try{if(n["F_URL"]&&CheckFBDN(n["F_URL"]))
return true}catch(i){}
if(!window.IRHRedirectedPage){window.IRHRedirectedPage=true;switch(parseInt(n["SType"])){case 1:if(parseInt(n["SNType"])==2){IRH_Utils.irh_log("SType1 -> Prompt");IROBW.PromptSitesClbk(n);break}
IRH_Utils.irh_log("SType1 -> Supported");IROBW.SupportedSitesClbk(n);break;case 2:IRH_Utils.irh_log("SType2 -> Similar");IROBW.SimilarSitesClbk(n);break;case 3:break;default:break}}},PromptSitesClbk:function(e){IROBW.LOG("PromptSitesClbkSitesClbk()");var n=parseFloat(e["CMIN"]);var r=parseFloat(e["CMAX"]);var i="";if(n==0&r==0){i=""}else{if(n==0&&r>0){i=parseFloat(r)*parseFloat(IROBW.irobSettings.COMM_FACTOR);i=i.toFixed(2);i+=e["CText"].toString();}else{i=parseFloat(n)*parseFloat(IROBW.irobSettings.COMM_FACTOR);i=i.toFixed(2);i+=e["CText"].toString();if(r>n){var h=parseFloat(r)*parseFloat(IROBW.irobSettings.COMM_FACTOR);h=h.toFixed(2);h+=e["CText"].toString()
i+="-"+h;}}}
var s=new IRH_Utils.SITE_DATA(e["A"],e["U"],i,e["N"],e["AP"],e["SType"],e["ID"],e["PN"],e["SNType"]);if(s.sRedirectUrl.toString().indexOf("http://")==-1){s.sRedirectUrl="//"+s.sRedirectUrl}
IROBW.tempSite=s;IROBW.fireStrip(s,function(){IROBW.AddToVisited();})},CouponRedirect:function(e){IROBW.LOG("CouponRedirect()");var n=e[0];var r=parseFloat(n["CMIN"].toString());var i=parseFloat(n["CMAX"].toString());var s="";if(n==0&r==0){i=""}else{if(n==0&&r>0){i=parseFloat(r)*parseFloat(IROBW.irobSettings.COMM_FACTOR);i=i.toFixed(2);i+=e["CText"].toString();}else{i=parseFloat(n)*parseFloat(IROBW.irobSettings.COMM_FACTOR);i=i.toFixed(2);i+=e["CText"].toString();if(r>n){var h=parseFloat(r)*parseFloat(IROBW.irobSettings.COMM_FACTOR);h=h.toFixed(2);h+=e["CText"].toString()
i+="-"+h;}}}
var o=new IRH_Utils.SITE_DATA(n["A"],n["U"],s,n["N"],n["AP"],n["SType"],n["ID"],n["PN"]);IROBW.AddToVisited();IROBW.fireStrip(o)},SimilarSitesClbk:function(e){IROBW.LOG("SimilarSitesClbk()");var n=new IRH_Utils.SIMILAR_SITE_DATA(e["A"],e["SType"]);IROBW.fireStrip(n)},SupportedSitesClbk:function(e){IROBW.LOG("SupportedSitesClbk()");var n=parseFloat(e["CMIN"]);var r=parseFloat(e["CMAX"]);var i="";if(n==0&r==0){i=""}else{if(n==0&&r>0){i=parseFloat(r)*parseFloat(IROBW.irobSettings.COMM_FACTOR);i=i.toFixed(2);i+=e["CText"].toString();}else{i=parseFloat(n)*parseFloat(IROBW.irobSettings.COMM_FACTOR);i=i.toFixed(2);i+=e["CText"].toString();if(r>n){var h=parseFloat(r)*parseFloat(IROBW.irobSettings.COMM_FACTOR);h=h.toFixed(2);h+=e["CText"].toString()
i+="-"+h;}}}
var s=new IRH_Utils.SITE_DATA(e["A"],e["U"],i,e["N"],e["AP"],e["SType"],e["ID"],e["PN"],e["SNType"]);if(s.sRedirectUrl.toString().indexOf("http://")==-1){s.sRedirectUrl="//"+s.sRedirectUrl}
IROBW.fireRedirectFrame(s,function(){IROBW.AddToVisited()});IROBW.fireStrip(s)
if(s.sRedirectUrl.toString().toLowerCase().indexOf("redirectlogic.aspx")==-1){IROBW.serverCountRedirect(s);}},RequestIdentity:function(){IROBW.LOG("RequestIdentity()");var script=document.createElement("SCRIPT");IROBW.EXT_ID=IROBW.EXT_ID+IROBW.IRHuserAgent;if(!IROBW.EXT_ID){SendToGA("Widget","EmptyUID","","event",IROBW.MainGA);IROBW.EXT_ID="iRHHardcodedUID"+IROBW.PROG_ID}
try{IROBW.EXT_ID=IROBW.EXT_ID.toLowerCase();}catch(e){}
var subId="";if(IROBW.SUB_ID){subId="&fRev=1&r_uid="+IROBW.SUB_ID;subId+="&r_name=irob";}
script.src="//az439107.vo.msecnd.net/Packages/pkgTranslate.aspx?progId="+IROBW.PROG_ID+"&uid="+IROBW.EXT_ID+"&clbkFunc="+IROBW.NameSpace+".SetCredentials"+subId;IROBW.headID.appendChild(script);},CheckSerp:function(){IROBW.LOG("CheckSerp()");var cUrl=document.location.toString();if(window.top.location.host.indexOf('google.co')>-1){var b=document.getElementsByTagName('body')[0];function getScript(url,callback){var script=document.createElement('script');script.src=url;var head=document.getElementsByTagName('head')[0],done=false;script.onload=script.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState=='loaded'||this.readyState=='complete')){done=true;callback();script.onload=script.onreadystatechange=null;head.removeChild(script);}};head.appendChild(script);}
getScript('//code.jquery.com/jquery-latest.min.js',function(){IROBW.serpInit();});return true;}},serpInit:function(){try{var irobDiv=document.createElement("div");irobDiv.id="irobDiv";irobDiv.style.display="none";document.querySelector("div#ires").appendChild(irobDiv);IROBW.UpdateSerpTicker();}catch(e){}
IRH_Utils.Cites=document.querySelectorAll(IRH_Utils.Selector);for(var i=0;i<IRH_Utils.Cites.length;i++){var Address=IRH_Utils.Cites[i];var text=('innerText'in Address)?'innerText':'textContent';Address=Address[text];Address=IROBW.parseUri(Address).host;Address=Address.replace("www.","");if(Address!=""&&Address[0]!='.'){Address="."+Address;}
IROBW.GetCouponByDomain(Address,i,"IRH_Utils.createToolTip");}},UpdateSerpTicker:function(){if(!window.iRobTicker){window.iRobTicker=true;window.setInterval(function(){try{var attr=document.querySelector("div#irobDiv");if(attr)
return;else
serpInit();}catch(e){}},3000);}else{}},GetCouponByDomain:function(sDomain,i,clbkFunc){IROBW.AddScript("//system.donation-tools.org/Coupons/getCouponBySiteDomain.aspx?subby=1&def_type=2&domain="+sDomain+"&index="+i+"&tq="+IRH_Utils.getWeekQuery()+"&clbkFunc="+clbkFunc);},GetOurServerTimeString:function(e){try{var t=e.setHours(e.getHours()-8);var n=new Date(t);return(new Date(n.toUTCString().substr(0,25))).toDateString()}catch(r){return e.toDateString()}},AddScript:function(e){IROBW.LOG("AddScript()");var t=document.createElement("script");t.src=e;IROBW.headID.appendChild(t)},InitFrame:function(e,t){IROBW.LOG("InitFrame()");var r=function(e){IRH_Utils.irh_log("Response:  "+e.data);try{var r=JSON.parse(e.data);switch(r.msgType.toString().toLowerCase()){case"set":break;case"get":break;case"setcredentials":IROBW.GetUserSettings();break;case"getcredentials":IROBW.LOG(r.value);IROBW.InitCredentials(r.value);break;case"setusersettings":IROBW.GetSettings();break;case"setsettings":IROBW.Start();IROBW.SendToGA("","","","pageview",IROBW.MainGA);break;case"getsettings":try{if(!r.value){throw new Error("")}else{var i=JSON.parse(r.value);var s=IROBW.GetOurServerTimeString(new Date);var o=IROBW.GetOurServerTimeString(new Date(i[0]["updateTime"]));IROBW.LOG("settings last update : "+o);IROBW.LOG("now : "+s);IROBW.LOG("is different ? : "+(o!=s));if(o!=s){throw new Error("Old settings")}else{IROBW.LOG("Settings are up to date!");IROBW.SetSettings(i)}}}catch(u){IRH_Utils.irh_log(u);IROBW.RequestSettings()}
break;case"getusersettings":try{if(!r.value){throw new Error("")}else{IROBW.LOG(r.value);var i=JSON.parse(r.value);var s=IROBW.GetOurServerTimeString(new Date);var o=IROBW.GetOurServerTimeString(new Date(i[0]["updateTime"]));IROBW.LOG("settings last update : "+o);IROBW.LOG("now : "+s);IROBW.LOG("is different ? : "+(o!=s));if(o!=s){throw new Error("Old settings")}else{IROBW.LOG("Settings are up to date!");IROBW.SetUserSettings(i)}}}catch(u){IRH_Utils.irh_log(u);IROBW.RequestUserSettings()}
break;case"check":if(document.referrer.indexOf(IROBW.ptFrame)>-1){IROBW.CheckSite("IROBW.CouponRedirect");return}
var s=new Date;s=s.getTime();var a=s-r.value||0;IRH_Utils.irh_log("Difference: "+a);if(a>IROBW.HOUR_MS*12){IRH_Utils.irh_log(typeof t==="function");if(typeof t==="function")
IROBW.LOG("Callbacking()!!!");t()}else{IRH_Utils.irh_log("Redirect was initiated less than an hour ago.")}
break;case'adjustheight':try{var targetElem=document.getElementById(message.frameId);targetElem.style.height=message.value+"px";}catch(e){}
break;case'navigateserp':try{var targetElem=document.getElementById(message.frameId);var collectionHas=function(a,b){for(var i=0,len=a.length;i<len;i++){if(a[i]==b)
return true;}
return false;};var findParentBySelector=function(elm,selector){var all=document.querySelectorAll(selector);var cur=elm.parentNode;while(cur&&!collectionHas(all,cur)){cur=cur.parentNode;}
return cur;};var selector="div.rc";var parent=findParentBySelector(targetElem,selector);var serpAnchor=parent.querySelector("h3 a");window.top.location="http://donation-tools.org/redirect.html?U="+encodeURIComponent(serpAnchor.href)+"&redirect=1"+"&redirect_url="+encodeURIComponent(message.redirectUrl);}catch(e){}
break;default:break}}catch(u){}};IROBW.iframe=document.createElement("IFRAME");IROBW.iframe.id="IRHCOMMFRAME";IROBW.iframe.name="IRHCOMMFRAME";IROBW.iframe.style.cssText="position:absolute;width:1px;height:1px;left:-9999px;";IROBW.iframe.src=IROBW.ptFrame;IROBW.headID.appendChild(IROBW.iframe);if(window.addEventListener){IROBW.iframe.addEventListener("load",function(){if(typeof e==="function"){e()}},false);window.addEventListener("message",function(e){r(e)},false)}else if(IROBW.iframe.attachEvent){IROBW.iframe.attachEvent("onload",function(){if(typeof e==="function"){e()}},false);window.attachEvent("onmessage",function(e){r(e)})}},AddToVisited:function(e){IROBW.LOG("AddToVisited()");var t=new Date;e=e||window.top.location.href.toString();var n=new IRH_Utils.Message(IROBW.fnGetDomain(e),t.getTime().toString(),"set");IROBW.SendMessage(n)},checkIfAd:function(){try{var e=document.referrer.toString().toLowerCase().trim();if(IRH_Utils.CheckStringDefined(e)==false||e==""||typeof e==="undefined"||e=="null"){return false}
if(e.indexOf(document.location.host)!=-1||e.indexOf("google.")!=-1||e.indexOf("irobinhood.")!=-1||e.indexOf("donation-tools.org")!=-1||e.indexOf("search.softonic")!=-1||e.indexOf("www.bing.")!=-1||e.indexOf("search.yahoo")!=-1){return false}
return true}catch(t){return true}},parseUri:function(str){var o=IROBW.parseUriOptions,m=o.parser[o.strictMode?"strict":"loose"].exec(str),uri={},i=14;while(i--)
uri[o.key[i]]=m[i]||"";uri[o.q.name]={};uri[o.key[12]].replace(o.q.parser,function($0,$1,$2){if($1)
uri[o.q.name][$1]=$2;});return uri;},parseUriOptions:{strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},fnGetDomain:function(e){try{e=e.indexOf("http")==-1?"http://"+e:e;var t=IROBW.parseUri(e).host;t=t.replace("www.","");if(t!=""){if(t[0]!="."){t="."+t}}
return t}catch(n){return""}
return""},IsFbdnMerchant:function(e){try{e=IROBW.fnGetDomain(e.toString().toLowerCase());var t=IROBW.irobSettings.C_F_LAND_MER.split(",");for(i in t){if(e.indexOf(t[i].toString().toLowerCase())>-1){return true}}}catch(n){}},IsAffiliateRedirectPage:function(e){try{e=e.toString().toLowerCase();var t=IROBW.irobSettings.C_AFF_PARAMS.split(",");for(i in t){if(e.indexOf(t[i].toString().toLowerCase())>-1){return true}}
t=IROBW.irobSettings.C_AFF_DOMAINS.split(",");for(i in t){if(e.indexOf(t[i].toString().toLowerCase())>-1){return true}}}catch(n){}
return false},IsAffiliatePage2:function(url,referrer){var fbdnIds="";try{var all_strings=eval(IROBW.irobSettings.C_C_ALL_STRINGS);for(i in all_strings){var strToCheck=all_strings[i][parseInt(i)+1];if(strToCheck=="aclk?")
continue;if(url.indexOf(strToCheck)>-1||referrer.indexOf(strToCheck)>-1){fbdnIds+=(parseInt(i)+1).toString()+","}}
fbdnIds=fbdnIds.substring(0,fbdnIds.length-1)}catch(e){}
return fbdnIds},FixAddress:function(e){var t=["ac","academy","ad","ae","aero","af","ag","agency","ai","al","am","an","ao","aq","ar","arpa","as","asia","associates","at","au","aw","ax","axa","az","ba","bar","bargains","bb","bd","be","berlin","bf","bg","bh","bi","bid","bike","biz","bj","blackfriday","blue","bm","bmw","bn","bo","boutique","br","bs","bt","build","builders","buzz","bv","bw","by","bz","ca","cab","camera","camp","capital","cards","careers","cat","catering","cc","cd","center","ceo","cf","cg","ch","cheap","christmas","ci","citic","ck","cl","cleaning","clothing","club","cm","cn","co","codes","coffee","com","community","company","computer","condos","construction","consulting","contractors","cool","coop","cr","cruises","cs","cu","cv","cw","cx","cy","cz","dance","dating","dd","de","democrat","diamonds","directory","dj","dk","dm","do","domains","dz","ec","edu","education","ee","eg","eh","email","engineering","enterprises","equipment","er","es","estate","et","eu","eus","events","exchange","expert","farm","fi","fish","fj","fk","flights","florist","fm","fo","fr","futbol","ga","gal","gallery","gb","gd","ge","gf","gg","gh","gi","gift","gl","glass","gm","gn","gov","gp","gq","gr","graphics","gripe","gs","gt","gu","guitars","guru","gw","gy","hk","hm","hn","holdings","holiday","house","hr","ht","hu","id","ie","il","im","immobilien","in","industries","info","ink","institute","int","international","io","iq","ir","is","it","je","jetzt","jm","jo","jobs","jp","kaufen","ke","kg","kh","ki","kim","kitchen","kiwi","km","kn","kp","kr","kw","ky","kz","la","land","lb","lc","lease","li","lighting","limo","link","lk","london","lr","ls","lt","lu","lv","ly","ma","maison","management","marketing","mc","md","me","media","menu","mg","mh","mil","mini","mk","ml","mm","mn","mo","mobi","moda","moe","monash","mp","mq","mr","ms","mt","mu","museum","mv","mw","mx","my","mz","na","nagoya","name","nc","ne","net","neustar","nf","ng","ni","ninja","nl","no","np","nr","nu","nyc","nz","om","onl","org","pa","paris","partners","parts","pe","pf","pg","ph","photo","photography","photos","pics","pictures","pink","pk","pl","plumbing","pm","pn","post","pr","pro","productions","products","properties","ps","pt","pub","pw","py","qa","re","recipes","red","reisen","rentals","repair","report","rest","reviews","rich","ro","rs","ru","rw","sa","sb","sc","sd","se","services","sexy","sg","sh","shiksha","shoes","si","singles","sj","sk","sl","sm","sn","so","social","solar","solutions","space","sr","ss","st","su","supplies","supply","support","sv","sx","sy","systems","sz","tattoo","tc","td","technology","tel","tf","tg","th","tienda","tips","tj","tk","tl","tm","tn","to","today","tokyo","tools","town","toys","tp","tr","trade","training","travel","tt","tv","tw","tz","ua","ug","uk","university","uno","us","uy","uz","va","vacations","vc","ve","ventures","vg","vi","viajes","villas","vision","vn","voting","voyage","vu","watch","webcam","wed","wf","wien","wiki","works","ws","xxx","xyz","ye","yt","yu","za","zm","zone","zw"];e=e.toLowerCase();e=e.replace("https://","").replace("ftp://","").replace("http://","").replace("www.","").replace("www1.","").replace("www2.","").replace("www8.","").replace("mailto:","");e=e.split("/")[0].split("?")[0].split(" ")[0].split(";")[0];e=e.replace(/^\s+|\s+$/gm,"");e=e.replace("@",".").replace(":",".");var n=e.split(".");n=n.reverse();var r="";var i=0;var s=false;while(n.length>i&&!s){if(t.indexOf(n[i])==-1){s=true}
r=n[i]+"."+r;i++}
r=r.substring(0,r.length-1);return r},CheckSite2:function(e,t){IROBW.LOG("CheckSite2()");if(document.referrer.indexOf(IROBW.StripSitesReferrer)>-1){IROBW.LOG("Strip site found");var r=new IRH_Utils.SITE_DATA("","","","","","","","",3);IROBW.fireStrip(r);return}
var i=-1;try{i=IROBW.irobUserSettings.COU||-1}catch(s){i=-1}
var swr="";var isSwrActivated=true;if(isSwrActivated){swr="&pkgId="+IROBW.Credentials.raw_pkgid+"&swr=1";}
var o=document.createElement("SCRIPT");o.src="//system.donation-tools.org/packages/merGetInfo.aspx?nameSpace="+IROBW.NameSpace+"&d="+IROBW.FixAddress(window.top.location.href.toString())+"&p="+IROBW.PROG_ID+"&clbk="+e+"&c="+i+"&sf="+t+"&urlBlockAff=2"+swr;IROBW.headID.appendChild(o)},fireRedirectFrame:function(e,t){var n=document.createElement("IFRAME");var r=(e.sRedirectUrl.indexOf("?")==-1&&e.sRedirectUrl.indexOf("&")==-1)?e.sRedirectUrl+"?":e.sRedirectUrl+"&";r+=e.sAffiliateParam+"="+IROBW.Credentials.raw_pkgid;n.src=r.indexOf("http")==-1?"//"+r:r;if(typeof t==="function"){n.onload=function(){t()}}
IRH_Utils.irh_log(n);IROBW.headID.appendChild(n)},serverCountRedirect:function(e){var t=document.createElement("IFRAME");var n="//system.donation-tools.org/logs/redirect.aspx?progId="+IROBW.PROG_ID+"&pkgId="+IROBW.Credentials.raw_pkgid+"&sid="+e.sID+"&aff="+e.sNetwork+"&PN="+e.PN+"&RED_TYPE=2";IRH_Utils.irh_log(n);t.setAttribute("height","0px");t.setAttribute("width","0px");t.cssText="display: none;";t.src=n;IROBW.headID.appendChild(t);IROBW.SendToGA("Widget","Redirect",document.location.href,"event",IROBW.RedirectGA)},SendToGA:function(e,t,n,r,i){var s="-1";try{s=IROBW.Credentials.raw_pkgid}catch(o){}
r=r||"event";timeTicks=(new Date).getTime();var u="//www.google-analytics.com/collect?v=1&_v=j12&a=282442659&t="+r+"&_s="+parseInt(Math.random()*1e10)+"&dl="+encodeURIComponent(document.location.href)+"&dr=&ul=en-us&de=UTF-8&sd=24-bit&je=1&ec="+e+"&ea="+t+"&el="+encodeURIComponent(n)+"&_utma=17049275.220532222.1379242168.1379336012.1379345423.4&_utmz=17049275.1379345423.4.4.utmcsr%3Dinf00113_tb_v1_toolbar%7Cutmccn%3D(referral)%7Cutmcmd%3Dreferral%7Cutmcct%3D%2F&_utmht="+timeTicks+"&_u=OQAC~&cid="+s+"&tid="+i+"&z="+parseInt(Math.random()*1e9);var a=document.createElement("img");a.src=u;var f="iRobGA-"+parseInt(Math.random()*1e10);a.id=f;a.onload=function(){if(a){a.parentNode.removeChild(a)}};IROBW.headID.appendChild(a);return},fireStrip:function(e,t){try{if(!IROBW.irobUserSettings.SHOW_UI){IROBW.LOG("UI IS DISABLED");return}}catch(n){}
if(IROBW.Tooltip==true){IROBW.InjectTooltip(e,t);return;}
if(IRH_Utils.SIMILAR_SITE_DATA.prototype.isPrototypeOf(e))
e.sType=IROBW.STRIP_TYPE.RED;else if(IRH_Utils.SITE_DATA.prototype.isPrototypeOf(e)){if(e.sNType==2){e.sType=IROBW.STRIP_TYPE.YELLOW}else{e.sType=IROBW.STRIP_TYPE.GREEN}}
IRH_Utils.irh_log(JSON.stringify(e));var r=document.createElement("SCRIPT");r.src=document.location.protocol+"//"+IROBW.StripUrl+"?url="+IROBW.irobSettings.HOMEPAGE_URL+"&causename="+IROBW.irobUserSettings.CharityName+"&cid="+IROBW.irobUserSettings.CharityID+"&AmazonName="+IROBW.irobSettings.AMAZON_US+"&afflink="+encodeURIComponent(e.sRedirectUrl)+"&host="+encodeURIComponent(document.domain)+"&type="+e.sType+"&commission="+e.sCommission+"&lang="+IROBW.irobUserSettings.Lang+"&money="+IROBW.irobSettings.TOTAL_MONEY+"&lang="+IROBW.irobUserSettings.Lang+"&nt="+e.sNetwork+"&sid="+e.sID+"&pkgId="+IROBW.Credentials.pkgid+"&prodname="+IROBW.ProdName+"&NS="+IROBW.NameSpace;if(typeof t==="function")
r.load=function(){t()};IROBW.headID.appendChild(r)},InjectTooltip:function(e,t){if(IRH_Utils.SIMILAR_SITE_DATA.prototype.isPrototypeOf(e))
e.sType=IROBW.STRIP_TYPE.RED;else if(IRH_Utils.SITE_DATA.prototype.isPrototypeOf(e)){if(e.sNType==2){e.sType=IROBW.STRIP_TYPE.YELLOW}else{e.sType=IROBW.STRIP_TYPE.GREEN}}
IRH_Utils.irh_log(JSON.stringify(e));var n=document.createElement("SCRIPT");n.src=document.location.protocol+"//static.donation-tools.org/Widgets/V3/UI/irobinhood_ui_tooltip.js?url="+IROBW.irobSettings.HOMEPAGE_URL+"&causename="+IROBW.irobUserSettings.CharityName+"&cid="+IROBW.irobUserSettings.CharityID+"&AmazonName="+IROBW.irobSettings.AMAZON_US+"&host=encodeURIComponent(document.domain)&type="+e.sType+"&commission="+e.sCommission+"&loc=encodeURIComponent(document.location.href)&messText=Every%2520purchase%2520at%2520"+e.sAddress+"%2520generates%2520a%25205%2524%2520donation%2520to%2520charity%2520-%2520at%2520no%2520cost%2520to%2520you.&money="+IROBW.irobSettings.TOTAL_MONEY+"&afflink="+encodeURIComponent(e.sRedirectUrl)+"&pkgId="+IROBW.Credentials.pkgid+"&nt="+e.sNetwork+"&sid="+e.sID+"&prodname="+IROBW.ProdName+"&NS="+IROBW.NameSpace;if(typeof t==="function")
n.load=function(){t()};IROBW.headID.appendChild(n)},Start:function(){var e=new IRH_Utils.Message(IROBW.fnGetDomain(window.top.location.href.toString()),"","check");IROBW.SendMessage(e)},GetCredentials:function(){var e=new IRH_Utils.Message(IROBW.PROG_ID,"","getcredentials");IROBW.SendMessage(e)},SetCredentials:function(e){if(e[0].raw_pkgid.toString()=="-1"){var t=new Date;t.setDate(t.getDate()+1);var n=new IRH_Utils.Message(IROBW.PROG_ID,t.getTime(),"deactivate");IROBW.SendMessage(n)}else{IROBW.Credentials=new IRH_Utils.IROB_CRED(e[0].pkgid,e[0].raw_pkgid);var n=new IRH_Utils.Message(IROBW.PROG_ID,JSON.stringify(e),"setcredentials");IROBW.SendMessage(n)}},AddTempScript:function(e){var t=document.createElement("script");t.src=e;t.onload=function(){if(t){t.parentNode.removeChild(t)}};var n=document.getElementsByTagName("head")[0];n.appendChild(t)},SetActive:function(e,t){try{t=parseInt(t)||0;var n=new IRH_Utils.Message(IROBW.PROG_ID,e,"setactive");IROBW.SendMessage(n);var r=parseInt(e)==0?"deactivate":"activate";if(t>0){r+="&d="+(new Date(t)).toISOString()}
IROBW.AddTempScript("//system.donation-tools.org/packages/actions/settings.aspx?pkgId="+IROBW.Credentials.pkgid+"&a="+r)}catch(i){}},SetActiveUI:function(e){var t=parseInt(e);if(!isNaN(t)){if(t>0&&(new Date).getTime()<t){var n=new IRH_Utils.Message(IROBW.PROG_ID,0,"setactiveui");IROBW.SendMessage(n);IROBW.AddTempScript("//system.donation-tools.org/Packages/Actions/Settings.aspx?pkgId="+IROBW.Credentials.pkgid+"&a=uioff&d="+(new Date(t)).toISOString())}}},InitCredentials:function(e){try{e=JSON.parse(e)[0];if(typeof e.pkgid==="undefined"||typeof e.raw_pkgid==="undefined"||!e.pkgid){IRH_Utils.irh_log("RequestIdentity();");IROBW.RequestIdentity();return}else{IROBW.Credentials=new IRH_Utils.IROB_CRED(e.pkgid,e.raw_pkgid)}}catch(t){IRH_Utils.irh_log("No pkg in localstorage...");IROBW.RequestIdentity();return}
IROBW.GetUserSettings()},GetSettings:function(){IROBW.LOG("GetSettings()");var e=new IRH_Utils.Message(IROBW.PROG_ID,"","getsettings");IROBW.SendMessage(e)},GetUserSettings:function(){IROBW.LOG("GetUserSettings()");var e=new IRH_Utils.Message(IROBW.PROG_ID,"","getusersettings");IROBW.SendMessage(e)},SetUserSettings:function(e){try{IROBW.irobUserSettings={};IROBW.irobUserSettings=e[0];var t=new Date;var n=t.getTime();IROBW.irobUserSettings.updateTime=n;var r=new IRH_Utils.Message(IROBW.PROG_ID,JSON.stringify(e),"setusersettings");IROBW.SendMessage(r);}catch(i){}},SetSettings:function(e){try{IROBW.irobSettings=new IRH_Utils.IROB_SETTINGS;IROBW.irobSettings=e[0];var t=new Date;var n=t.getTime();IROBW.irobSettings.updateTime=n;var r=new IRH_Utils.Message(IROBW.PROG_ID,JSON.stringify(e),"setsettings");IROBW.SendMessage(r)}catch(i){}},RequestUserSettings:function(){var e=document.createElement("SCRIPT");e.src=document.location.protocol+"//system.donation-tools.org/Packages/pkgGetSettingsNew.aspx?pkgId="+IROBW.Credentials.pkgid+"&progId="+IROBW.PROG_ID+"&dotId="+IROBW.DOT_ID+"&jsp=1&callbackFunc=IROBW.SetUserSettings&index=1&w=";IROBW.headID.appendChild(e);return},AclkRef:function(e){IROBW.aclkref=e},RequestSettings:function(){var e=document.createElement("SCRIPT");e.src=document.location.protocol+"//az439107.vo.msecnd.net/Programs/getSettingsV2.aspx?progId="+IROBW.PROG_ID+"&dotId="+IROBW.DOT_ID+"&rev="+IROBW.irobUserSettings.REV+"&jsp=1&callbackFunc=IROBW.SetSettings&index=1&w=";IROBW.headID.appendChild(e);return}}